import{r as E}from"./styled-components.browser.esm-1bf82734.js";import{Z as D,u as h,a as S,g as W}from"./src/newtab/index-25a29073.js";var R=D&&("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch);function U(X,L,T){var s=T===void 0?{}:T,p=s.delay,Y=p===void 0?300:p,t=s.moveThreshold,g=s.onClick,P=s.onLongPressEnd,M=h(X),w=h(g),y=h(P),o=E.useRef(),u=E.useRef(!1),v=E.useRef({x:0,y:0}),c=!!(t?.x&&t.x>0||t?.y&&t.y>0);S(function(){var n=W(L);if(!n?.addEventListener)return;var b=function(e){var r=x(e),i=r.clientX,m=r.clientY,C=Math.abs(i-v.current.x),k=Math.abs(m-v.current.y);return!!(t?.x&&C>t.x||t?.y&&k>t.y)};function x(e){return"TouchEvent"in window&&e instanceof TouchEvent?{clientX:e.touches[0].clientX,clientY:e.touches[0].clientY}:e instanceof MouseEvent?{clientX:e.clientX,clientY:e.clientY}:(console.warn("Unsupported event type"),{clientX:0,clientY:0})}var a=function(e){if(c){var r=x(e),i=r.clientX,m=r.clientY;v.current.x=i,v.current.y=m}o.current=setTimeout(function(){M.current(e),u.current=!0},Y)},d=function(e){o.current&&b(e)&&(clearTimeout(o.current),o.current=void 0)},l=function(e,r){var i;r===void 0&&(r=!1),o.current&&clearTimeout(o.current),u.current&&((i=y.current)===null||i===void 0||i.call(y,e)),r&&!u.current&&w.current&&w.current(e),u.current=!1},f=function(e){return l(e,!0)};return R?(n.addEventListener("touchstart",a),n.addEventListener("touchend",f),c&&n.addEventListener("touchmove",d)):(n.addEventListener("mousedown",a),n.addEventListener("mouseup",f),n.addEventListener("mouseleave",l),c&&n.addEventListener("mousemove",d)),function(){o.current&&(clearTimeout(o.current),u.current=!1),R?(n.removeEventListener("touchstart",a),n.removeEventListener("touchend",f),c&&n.removeEventListener("touchmove",d)):(n.removeEventListener("mousedown",a),n.removeEventListener("mouseup",f),n.removeEventListener("mouseleave",l),c&&n.removeEventListener("mousemove",d))}},[],L)}export{U as u};
