import{r as l}from"./styled-components.browser.esm-00336e06.js";import{u as L,a as W,g as j}from"./src/newtab/index-b6804a1b.js";function A(b,T,g){var v=g===void 0?{}:g,R=v.delay,C=R===void 0?300:R,t=v.moveThreshold,_=v.onClick,w=v.onLongPressEnd,k=L(b),f=L(_),c=L(w),u=l.useRef(void 0),i=l.useRef(!1),s=l.useRef({x:0,y:0}),a=l.useRef(!1),d=l.useRef(!1),m=!!(t?.x&&t.x>0||t?.y&&t.y>0);W(function(){var n=j(T);if(!n?.addEventListener)return;var D=function(e){var r=p(e),o=r.clientX,h=r.clientY,S=Math.abs(o-s.current.x),U=Math.abs(h-s.current.y);return!!(t?.x&&S>t.x||t?.y&&U>t.y)};function p(e){return"TouchEvent"in window&&e instanceof TouchEvent?{clientX:e.touches[0].clientX,clientY:e.touches[0].clientY}:e instanceof MouseEvent?{clientX:e.clientX,clientY:e.clientY}:{clientX:0,clientY:0}}var x=function(e){u.current=setTimeout(function(){k.current(e),i.current=!0},C)},y=function(e){if(!d.current){if(d.current=!0,m){var r=p(e),o=r.clientX,h=r.clientY;s.current.x=o,s.current.y=h}x(e)}},X=function(e){var r;!((r=e?.sourceCapabilities)===null||r===void 0)&&r.firesTouchEvents||(a.current=!0,m&&(s.current.x=e.clientX,s.current.y=e.clientY),x(e))},E=function(e){u.current&&D(e)&&(clearTimeout(u.current),u.current=void 0)},Y=function(e){var r;d.current&&(d.current=!1,u.current&&(clearTimeout(u.current),u.current=void 0),i.current?(r=c.current)===null||r===void 0||r.call(c,e):f.current&&f.current(e),i.current=!1)},P=function(e){var r,o;!((r=e?.sourceCapabilities)===null||r===void 0)&&r.firesTouchEvents||a.current&&(a.current=!1,u.current&&(clearTimeout(u.current),u.current=void 0),i.current?(o=c.current)===null||o===void 0||o.call(c,e):f.current&&f.current(e),i.current=!1)},M=function(e){var r;a.current&&(a.current=!1,u.current&&(clearTimeout(u.current),u.current=void 0),i.current&&((r=c.current)===null||r===void 0||r.call(c,e),i.current=!1))};return n.addEventListener("mousedown",X),n.addEventListener("mouseup",P),n.addEventListener("mouseleave",M),n.addEventListener("touchstart",y),n.addEventListener("touchend",Y),m&&(n.addEventListener("mousemove",E),n.addEventListener("touchmove",E)),function(){u.current&&(clearTimeout(u.current),i.current=!1),n.removeEventListener("mousedown",X),n.removeEventListener("mouseup",P),n.removeEventListener("mouseleave",M),n.removeEventListener("touchstart",y),n.removeEventListener("touchend",Y),m&&(n.removeEventListener("mousemove",E),n.removeEventListener("touchmove",E))}},[],T)}export{A as u};
